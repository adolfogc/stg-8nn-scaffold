# Copyright (C) 2018 Adolfo E. Garc√≠a
#
# This file is part of STG-8nn-Scaffold.
#
# STG-8nn-Scaffold is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# STG-8nn-Scaffold is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with STG-8nn-Scaffold.  If not, see <https://www.gnu.org/licenses/>.

cmake_minimum_required(VERSION 3.5)

##
## DSDL SOURCE FILES
##

if(DEFINED SCAFFOLD_DIR)
  set(DSDL_DIR ${SCAFFOLD_DIR}/dependencies/dsdl)
else()
  set(DSDL_DIR dependencies/dsdl)
endif()

if(DEFINED SCAFFOLD_DIR)
  set(DSDLC_DIR ${SCAFFOLD_DIR}/dependencies/dronecan_dsdlc)
else()
  set(DSDLC_DIR dependencies/dronecan_dsdlc)
endif()


set(DSDL_SOURCE_FILES
    ${DSDL_DIR}/uavcan/Timestamp.uavcan
)

list(APPEND DSDL_SOURCE_FILES
    ${DSDL_DIR}/uavcan/protocol/1.GetNodeInfo.uavcan
    ${DSDL_DIR}/uavcan/protocol/2.GetDataTypeInfo.uavcan
    ${DSDL_DIR}/uavcan/protocol/4.GetTransportStats.uavcan
    ${DSDL_DIR}/uavcan/protocol/4.GlobalTimeSync.uavcan
    ${DSDL_DIR}/uavcan/protocol/5.Panic.uavcan
    ${DSDL_DIR}/uavcan/protocol/5.RestartNode.uavcan
    ${DSDL_DIR}/uavcan/protocol/6.AccessCommandShell.uavcan
    ${DSDL_DIR}/uavcan/protocol/341.NodeStatus.uavcan
    ${DSDL_DIR}/uavcan/protocol/CANIfaceStats.uavcan
    ${DSDL_DIR}/uavcan/protocol/DataTypeKind.uavcan
    ${DSDL_DIR}/uavcan/protocol/HardwareVersion.uavcan
    ${DSDL_DIR}/uavcan/protocol/SoftwareVersion.uavcan
)

list(APPEND DSDL_SOURCE_FILES
    ${DSDL_DIR}/uavcan/protocol/debug/16370.KeyValue.uavcan
    ${DSDL_DIR}/uavcan/protocol/debug/16383.LogMessage.uavcan
    ${DSDL_DIR}/uavcan/protocol/debug/LogLevel.uavcan
)

list(APPEND DSDL_SOURCE_FILES
    ${DSDL_DIR}/uavcan/protocol/dynamic_node_id/1.Allocation.uavcan
)

list(APPEND DSDL_SOURCE_FILES
    ${DSDL_DIR}/uavcan/protocol/enumeration/15.Begin.uavcan
    ${DSDL_DIR}/uavcan/protocol/enumeration/380.Indication.uavcan
)

list(APPEND DSDL_SOURCE_FILES
    ${DSDL_DIR}/uavcan/protocol/file/40.BeginFirmwareUpdate.uavcan
    ${DSDL_DIR}/uavcan/protocol/file/45.GetInfo.uavcan
    ${DSDL_DIR}/uavcan/protocol/file/46.GetDirectoryEntryInfo.uavcan
    ${DSDL_DIR}/uavcan/protocol/file/47.Delete.uavcan
    ${DSDL_DIR}/uavcan/protocol/file/48.Read.uavcan
    ${DSDL_DIR}/uavcan/protocol/file/49.Write.uavcan
    ${DSDL_DIR}/uavcan/protocol/file/EntryType.uavcan
    ${DSDL_DIR}/uavcan/protocol/file/Error.uavcan
    ${DSDL_DIR}/uavcan/protocol/file/Path.uavcan
)

list(APPEND DSDL_SOURCE_FILES
    ${DSDL_DIR}/uavcan/protocol/param/10.ExecuteOpcode.uavcan
    ${DSDL_DIR}/uavcan/protocol/param/11.GetSet.uavcan
    ${DSDL_DIR}/uavcan/protocol/param/Empty.uavcan
    ${DSDL_DIR}/uavcan/protocol/param/NumericValue.uavcan
    ${DSDL_DIR}/uavcan/protocol/param/Value.uavcan
)

# Note: this variable is the source directory passed to the DSDL compiler, so you should
# use the full path.
set(DSDL_SOURCE_DIRECTORIES ${PROJECT_SOURCE_DIR}/${DSDL_DIR}/uavcan)

##
## DSDL GENERATED FILES
##

set(DSDL_OUT_DIR dsdl-gen)

list(APPEND DSDL_GENERATED_FILES
    ${DSDL_OUT_DIR}/include/dronecan_msgs.h
    ${DSDL_OUT_DIR}/include/uavcan.CoarseOrientation.h
    ${DSDL_OUT_DIR}/include/uavcan.Timestamp.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.actuator.ArrayCommand.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.actuator.Command.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.actuator.Status.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.ahrs.MagneticFieldStrength.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.ahrs.MagneticFieldStrength2.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.ahrs.RawIMU.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.ahrs.Solution.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.air_data.AngleOfAttack.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.air_data.IndicatedAirspeed.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.air_data.RawAirData.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.air_data.Sideslip.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.air_data.StaticPressure.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.air_data.StaticTemperature.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.air_data.TrueAirspeed.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.camera_gimbal.AngularCommand.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.camera_gimbal.GEOPOICommand.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.camera_gimbal.Mode.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.camera_gimbal.Status.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.device.Temperature.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.esc.RPMCommand.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.esc.RawCommand.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.esc.Status.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.gnss.Auxiliary.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.gnss.ECEFPositionVelocity.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.gnss.Fix.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.gnss.Fix2.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.gnss.RTCMStream.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.hardpoint.Command.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.hardpoint.Status.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.ice.FuelTankStatus.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.ice.reciprocating.CylinderStatus.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.ice.reciprocating.Status.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.indication.BeepCommand.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.indication.LightsCommand.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.indication.RGB565.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.indication.SingleLightCommand.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.power.BatteryInfo.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.power.CircuitStatus.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.power.PrimaryPowerSupplyStatus.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.range_sensor.Measurement.h
    ${DSDL_OUT_DIR}/include/uavcan.equipment.safety.ArmingStatus.h
    ${DSDL_OUT_DIR}/include/uavcan.navigation.GlobalNavigationSolution.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.AccessCommandShell.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.AccessCommandShell_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.AccessCommandShell_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.CANIfaceStats.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.DataTypeKind.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GetDataTypeInfo.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GetDataTypeInfo_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GetDataTypeInfo_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GetNodeInfo.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GetNodeInfo_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GetNodeInfo_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GetTransportStats.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GetTransportStats_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GetTransportStats_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.GlobalTimeSync.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.HardwareVersion.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.NodeStatus.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.Panic.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.RestartNode.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.RestartNode_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.RestartNode_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.SoftwareVersion.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.debug.KeyValue.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.debug.LogLevel.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.debug.LogMessage.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.dynamic_node_id.Allocation.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.dynamic_node_id.server.AppendEntries.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.dynamic_node_id.server.AppendEntries_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.dynamic_node_id.server.AppendEntries_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.dynamic_node_id.server.Discovery.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.dynamic_node_id.server.Entry.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.dynamic_node_id.server.RequestVote.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.dynamic_node_id.server.RequestVote_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.dynamic_node_id.server.RequestVote_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.enumeration.Begin.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.enumeration.Begin_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.enumeration.Begin_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.enumeration.Indication.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.BeginFirmwareUpdate.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.BeginFirmwareUpdate_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.BeginFirmwareUpdate_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Delete.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Delete_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Delete_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.EntryType.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Error.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.GetDirectoryEntryInfo.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.GetDirectoryEntryInfo_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.GetDirectoryEntryInfo_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.GetInfo.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.GetInfo_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.GetInfo_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Path.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Read.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Read_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Read_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Write.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Write_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.file.Write_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.param.Empty.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.param.ExecuteOpcode.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.param.ExecuteOpcode_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.param.ExecuteOpcode_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.param.GetSet.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.param.GetSet_req.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.param.GetSet_res.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.param.NumericValue.h
    ${DSDL_OUT_DIR}/include/uavcan.protocol.param.Value.h
    ${DSDL_OUT_DIR}/include/uavcan.tunnel.Broadcast.h
    ${DSDL_OUT_DIR}/include/uavcan.tunnel.Call.h
    ${DSDL_OUT_DIR}/include/uavcan.tunnel.Call_req.h
    ${DSDL_OUT_DIR}/include/uavcan.tunnel.Call_res.h
    ${DSDL_OUT_DIR}/include/uavcan.tunnel.Protocol.h
    ${DSDL_OUT_DIR}/include/uavcan.tunnel.SerialConfig.h
)

list(APPEND DSDL_GENERATED_FILES
    ${DSDL_OUT_DIR}/src/uavcan.CoarseOrientation.c
    ${DSDL_OUT_DIR}/src/uavcan.Timestamp.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.actuator.ArrayCommand.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.actuator.Command.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.actuator.Status.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.ahrs.MagneticFieldStrength.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.ahrs.MagneticFieldStrength2.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.ahrs.RawIMU.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.ahrs.Solution.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.air_data.AngleOfAttack.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.air_data.IndicatedAirspeed.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.air_data.RawAirData.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.air_data.Sideslip.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.air_data.StaticPressure.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.air_data.StaticTemperature.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.air_data.TrueAirspeed.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.camera_gimbal.AngularCommand.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.camera_gimbal.GEOPOICommand.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.camera_gimbal.Mode.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.camera_gimbal.Status.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.device.Temperature.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.esc.RPMCommand.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.esc.RawCommand.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.esc.Status.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.gnss.Auxiliary.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.gnss.ECEFPositionVelocity.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.gnss.Fix.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.gnss.Fix2.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.gnss.RTCMStream.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.hardpoint.Command.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.hardpoint.Status.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.ice.FuelTankStatus.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.ice.reciprocating.CylinderStatus.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.ice.reciprocating.Status.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.indication.BeepCommand.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.indication.LightsCommand.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.indication.RGB565.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.indication.SingleLightCommand.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.power.BatteryInfo.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.power.CircuitStatus.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.power.PrimaryPowerSupplyStatus.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.range_sensor.Measurement.c
    ${DSDL_OUT_DIR}/src/uavcan.equipment.safety.ArmingStatus.c
    ${DSDL_OUT_DIR}/src/uavcan.navigation.GlobalNavigationSolution.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.AccessCommandShell_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.AccessCommandShell_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.CANIfaceStats.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.DataTypeKind.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.GetDataTypeInfo_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.GetDataTypeInfo_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.GetNodeInfo_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.GetNodeInfo_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.GetTransportStats_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.GetTransportStats_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.GlobalTimeSync.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.HardwareVersion.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.NodeStatus.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.Panic.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.RestartNode_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.RestartNode_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.SoftwareVersion.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.debug.KeyValue.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.debug.LogLevel.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.debug.LogMessage.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.dynamic_node_id.Allocation.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.dynamic_node_id.server.AppendEntries_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.dynamic_node_id.server.AppendEntries_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.dynamic_node_id.server.Discovery.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.dynamic_node_id.server.Entry.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.dynamic_node_id.server.RequestVote_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.dynamic_node_id.server.RequestVote_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.enumeration.Begin_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.enumeration.Begin_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.enumeration.Indication.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.BeginFirmwareUpdate_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.BeginFirmwareUpdate_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.Delete_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.Delete_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.EntryType.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.Error.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.GetDirectoryEntryInfo_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.GetDirectoryEntryInfo_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.GetInfo_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.GetInfo_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.Path.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.Read_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.Read_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.Write_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.file.Write_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.param.Empty.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.param.ExecuteOpcode_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.param.ExecuteOpcode_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.param.GetSet_req.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.param.GetSet_res.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.param.NumericValue.c
    ${DSDL_OUT_DIR}/src/uavcan.protocol.param.Value.c
    ${DSDL_OUT_DIR}/src/uavcan.tunnel.Broadcast.c
    ${DSDL_OUT_DIR}/src/uavcan.tunnel.Call_req.c
    ${DSDL_OUT_DIR}/src/uavcan.tunnel.Call_res.c
    ${DSDL_OUT_DIR}/src/uavcan.tunnel.Protocol.c
    ${DSDL_OUT_DIR}/src/uavcan.tunnel.SerialConfig.c
)

##
## CUSTOM COMMAND
##

add_custom_command(
    OUTPUT ${DSDL_GENERATED_FILES}
    COMMAND python3 ${PROJECT_SOURCE_DIR}/${DSDLC_DIR}/dronecan_dsdlc.py -O ${PROJECT_BINARY_DIR}/${DSDL_OUT_DIR} ${DSDL_SOURCE_DIRECTORIES}
    MAIN_DEPENDENCY ${DSDLC_DIR}/dronecan_dsdlc.py
    DEPENDS ${DSDL_SOURCE_FILES}
)

##
## SET SOURCES AND HEADERS
##

set(DSDL_C_INCLUDE ${PROJECT_BINARY_DIR}/${DSDL_OUT_DIR})
set(DSDL_C_SOURCES ${DSDL_GENERATED_FILES})
